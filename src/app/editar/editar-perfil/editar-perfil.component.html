<body>
    <app-loading *ngIf="loading"></app-loading>
    <div class="container" *ngIf="!loading">
        <h3>Editar Perfil</h3>
        <form class="m-5" [formGroup]="form" (ngSubmit)="editarPerfil($event)">
            <div class="form-group">
                <label for="exampleInputNombre">Nombre</label>
                <input type="text" class="form-control" required id="nombre" name="nombre" formControlName="nombre"
                    [ngClass]="{'is-invalid' : Nombre?.errors && Nombre?.touched, 'is-valid' : !Nombre?.errors && Nombre?.touched}">
                <span *ngIf="Nombre?.errors && Nombre?.touched" class="text-danger">El Nombre es requerido</span>
            </div>
            <div class="form-group">
                <label for="exampleInputApellido">Apellido</label>
                <input type="text" class="form-control" id="apellido" name="apellido" formControlName="apellido"
                    [ngClass]="{'is-invalid' : Apellido?.errors && Apellido?.touched, 'is-valid' : !Apellido?.errors && Apellido?.touched}">
                <span *ngIf="Apellido?.errors && Apellido?.touched" class="text-danger">El Apellido es requerido</span>
            </div>
            <div class="form-group">
                <label for="exampleInputMail">Email</label>
                <input type="text" class="form-control" id="mail" name="mail" formControlName="mail" readonly>
            </div>
            <div class="form-group">
                <label for="exampleInputOcupacion">Ocupación</label>
                <input type="text" class="form-control" id="ocupacion" name="ocupacion" formControlName="ocupacion"
                    [ngClass]="{'is-invalid' : Ocupacion?.errors && Ocupacion?.touched, 'is-valid' : !Ocupacion?.errors && Ocupacion?.touched}">
                <span *ngIf="Ocupacion?.errors && Ocupacion?.touched" class="text-danger">Ingrese su ocupación</span>
            </div>
            <div class="form-group">
                <label for="exampleInputSobreMi">Sobre Mi</label>
                <input type="text" class="form-control" id="sobreMi" name="sobreMi" formControlName="sobreMi"
                    [ngClass]="{'is-invalid' : SobreMi?.errors && SobreMi?.touched, 'is-valid' : !SobreMi?.errors && SobreMi?.touched}">
                <span *ngIf="SobreMi?.errors && SobreMi?.touched" class="text-danger">Contanos algo de vos</span>
            </div>
            <div class="form-group">
                <label for="exampleInputNacimiento">Nacimiento</label>
                <input type="date" class="form-control" id="nacimiento" name="nacimiento" formControlName="nacimiento"
                    [ngClass]="{'is-invalid' : Nacimiento?.errors && Nacimiento?.touched, 'is-valid' : !Nacimiento?.errors && Nacimiento?.touched}"
                    [value]="form.value.nacimiento | date:'yyyy-MM-dd'">
                <span *ngIf="Nacimiento?.errors && Nacimiento?.touched" class="text-danger">Ingrese su fecha de
                    nacimiento</span>
                <span *ngIf="!validarFechaActual(form.value.nacimiento)" class="text-danger">La fecha ingresada no puede
                    superar a la actual</span>
            </div>
            <div class="form-group">
                <label for="exampleInputCiudad">Ciudad</label>
                <input type="text" class="form-control" id="ciudad" name="ciudad" formControlName="ciudad"
                    [ngClass]="{'is-invalid' : Ciudad?.errors && Ciudad?.touched, 'is-valid' : !Ciudad?.errors && Ciudad?.touched}">
                <span *ngIf="Ciudad?.errors && Ciudad?.touched" class="text-danger">Ingrese su ciudad</span>
            </div>
            <div class="form-group">
                <label for="exampleInputProvincia">Provincia</label>
                <input type="text" class="form-control" id="provincia" name="provincia" formControlName="provincia"
                    [ngClass]="{'is-invalid' : Provincia?.errors && Provincia?.touched, 'is-valid' : !Provincia?.errors && Provincia?.touched}">
                <span *ngIf="Provincia?.errors && Provincia?.touched" class="text-danger">Ingrese su provincia</span>
            </div>

            <button type="button" (click)="volverHome()" class="btn btn-danger">Cancelar</button>
            <button type="submit" [disabled]="!Validacion|| mostrarSpinner" class="btn btn-success">Guardar
                cambios</button>
            <br>
            <br>
            <div class="row justify-content-center align-items-center minh-100">
                <div *ngIf="mostrarSpinner" class="spinner-grow text-muted"></div>
            </div>
        </form>
    </div>
</body>